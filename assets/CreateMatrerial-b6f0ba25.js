import{r as l,u as E,s as M,h as N,o as n,c as h,b as t,m as x,a as i,k as r,l as d,F as T,f as U,e as j,j as I}from"./index-1d5f5eb5.js";import{E as P}from"./Edit-f4b23dcc.js";import{B as g}from"./Btn-7549b577.js";import{_ as A}from"./Checkbox-65a82ae2.js";import{P as b}from"./Plus-ba34c2df.js";/* empty css                                             *//* empty css                                                            *//* empty css                                                 */const O={class:"material"},Y={class:"container"},z={class:"df-aic-jcsb"},J=t("h2",{class:"title"},"Материал",-1),L={key:1,class:"material-btns"},R=t("h4",{class:"material-name"},"Название",-1),q=t("h4",{class:"material-name"},"Аннотация",-1),G=t("h4",{class:"material-name"},"Область",-1),H={class:"material-checkbox-wrapper"},K={class:"material-checkbox"},Q=t("h4",{class:"material-name"},"Автор",-1),W={class:"material-more"},X=t("h4",{class:"material-text"},"YouTube",-1),Z={class:"material-more"},de={__name:"CreateMatrerial",setup(ee){const o=l(!1),_=E();l(null),M();const u=l(""),c=l(""),f=l(""),p=l(""),m=l([]),y=l(null);let k=null;const v=new Date,C=v.getFullYear(),w=String(v.getMonth()+1).padStart(2,"0"),S=String(v.getDate()).padStart(2,"0"),$=`${C}-${w}-${S}`,F=()=>{k=y.value.files[0]},B=(s,e)=>{if(e)m.value.push(s);else{const a=m.value.filter(D=>D!==s);m.value=a}},V=async()=>{const s=new FormData;s.append("title",u.value),s.append("year",$),s.append("description",c.value),s.append("youtube",p.value),s.append("disciplines","1"),s.append("authors","1"),s.append("pdf",k);try{const e=await fetch("http://89.208.106.189/api/v1/material/create",{method:"POST",headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("access_token"))}`},body:s});if(!e.ok)throw new Error("Network response was not ok");const a=await e.json();console.log("File uploaded successfully:",a)}catch(e){console.error("Error uploading file:",e)}};return N(()=>{_.dispatch("getSciences")}),(s,e)=>(n(),h("section",O,[t("div",Y,[t("div",z,[J,o.value?(n(),x(P,{key:0,onClick:e[0]||(e[0]=a=>o.value=!o.value)})):(n(),h("div",L,[i(g,{onClick:e[1]||(e[1]=a=>o.value=!o.value),style:{padding:"15px 70px"},disabled:!1,text:"Отмена"}),i(g,{onClick:e[2]||(e[2]=a=>o.value=!o.value),style:{padding:"15px 70px"},text:"Сохранить"})]))]),t("div",null,[R,r(t("input",{type:"text",class:"material-input",placeholder:"Введите","onUpdate:modelValue":e[3]||(e[3]=a=>u.value=a)},null,512),[[d,u.value]]),q,r(t("textarea",{class:"material-input textarea",placeholder:"Введите","onUpdate:modelValue":e[4]||(e[4]=a=>c.value=a)},null,512),[[d,c.value]]),G,t("div",H,[t("div",K,[(n(!0),h(T,null,U(j(_).state.sciences,a=>(n(),x(A,{onChildClick:B,key:a.title,item:a.title},null,8,["item"]))),128))])]),Q,r(t("input",{type:"text",class:"material-input",placeholder:"Введите","onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a)},null,512),[[d,f.value]]),t("div",W,[i(b),I(" Добавить автора ")]),X,r(t("input",{type:"text",class:"material-input",placeholder:"Ссылка","onUpdate:modelValue":e[6]||(e[6]=a=>p.value=a)},null,512),[[d,p.value]]),t("div",Z,[i(b),t("input",{type:"file",ref_key:"fileInput",ref:y,onChange:F},null,544)]),t("button",{onClick:e[7]||(e[7]=a=>V()),class:"material-btn"},"Создать материал")])])]))}};export{de as default};
