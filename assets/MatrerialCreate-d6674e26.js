import{s as I,r as l,u as P,h as U,o,c as h,b as a,m as i,k as _,l as v,F as x,f as C,e as w,a as b,j as O}from"./index-1d5f5eb5.js";import{B as S}from"./Btn-7549b577.js";import{_ as q}from"./Checkbox-65a82ae2.js";import{_ as z}from"./CheckboxSec-29933b73.js";import{P as $}from"./Plus-ba34c2df.js";/* empty css                                                            *//* empty css                                                 */const G={class:"prolect-material"},J={class:"container"},L={class:"df-aic-jcsb"},R=a("h2",{class:"title"},"Проект",-1),Y=a("h4",{class:"prolect-material-name"},"Название",-1),H=a("h4",{class:"prolect-material-name"},"Аннотация",-1),K=a("h4",{class:"prolect-material-name"},"Область",-1),Q={class:"prolect-material-checkbox-wrapper"},W={class:"prolect-material-checkbox"},X=a("h4",{class:"prolect-material-name"},"Автор",-1),Z={class:"prolect-material-more"},ee=a("h4",{class:"prolect-material-name"},"Дисциплины",-1),te={class:"prolect-material-checkbox"},ae={class:"material-more"},ue={__name:"MatrerialCreate",setup(se){I();const f=l(!1),F=l(!0),c=P(),p=l(""),u=l(""),k=l(""),n=l([]),B=l("https://www.youtube.com/watch?v=Tcfm7SnGqDk"),r=l([]),y=l(null);let g=null;const d=new Date,D=d.getFullYear(),V=String(d.getMonth()+1).padStart(2,"0"),M=String(d.getDate()).padStart(2,"0"),N=`${D}-${V}-${M}`,j=(s,e)=>{if(e)r.value.push(s);else{const t=r.value=r.value.filter(m=>m!==s);r.value=t}},T=(s,e)=>{if(e)n.value.push(s);else{const t=n.value=n.value.filter(m=>m!==s);n.value=t}},A=()=>{g=y.value.files[0]},E=async()=>{const s=new FormData;s.append("title",u.value),s.append("year",N),s.append("description",p.value),s.append("youtube",B.value),s.append("disciplines","1"),s.append("authors","1"),s.append("pdf",g);try{const e=await fetch("http://89.208.106.189/api/v1/material/create",{method:"POST",headers:{Authorization:`Bearer ${JSON.parse(localStorage.getItem("access_token"))}`},body:s});if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();console.log("File uploaded successfully:",t)}catch(e){console.error("Error uploading file:",e)}};return U(()=>{c.dispatch("getSciences")}),(s,e)=>(o(),h("section",G,[a("div",J,[a("div",L,[R,F.value?(o(),i(S,{key:0,onClick:e[0]||(e[0]=t=>s.$router.push("/projects")),style:{padding:"15px 70px"},text:"Назад",class:"btn-first"})):(o(),i(S,{key:1,onClick:e[1]||(e[1]=t=>f.value=!f.value),style:{padding:"15px 70px"},text:"Покинуть проект"}))]),Y,_(a("input",{type:"text",class:"prolect-material-input",placeholder:"Введите","onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t)},null,512),[[v,u.value]]),H,_(a("textarea",{class:"prolect-material-input",placeholder:"Введите","onUpdate:modelValue":e[3]||(e[3]=t=>p.value=t)},null,512),[[v,p.value]]),K,a("div",Q,[a("div",W,[(o(!0),h(x,null,C(w(c).state.sciences,t=>(o(),i(z,{onChildClickSec:T,key:t.title_ru,item:t.title_ru},null,8,["item"]))),128))])]),X,_(a("input",{type:"text",class:"prolect-material-input",placeholder:"Введите","onUpdate:modelValue":e[4]||(e[4]=t=>k.value=t)},null,512),[[v,k.value]]),a("div",Z,[b($),O(" Добавить автора ")]),ee,a("div",te,[(o(!0),h(x,null,C(w(c).state.sciences,t=>(o(),i(q,{onChildClick:j,key:t.title_ru,item:t.title_ru},null,8,["item"]))),128))]),a("div",ae,[b($),a("input",{type:"file",ref_key:"fileInput",ref:y,onChange:A},null,544)]),a("button",{onClick:E,class:"prolect-material-btn"},"Создать материал")])]))}};export{ue as default};
