import{r as l,u as F,h as A,o,c as _,b as s,m as i,k as v,l as f,F as k,f as g,e as y}from"./index-1d5f5eb5.js";import{B as x}from"./Btn-7549b577.js";import{_ as M}from"./Checkbox-65a82ae2.js";import{_ as N}from"./CheckboxSec-29933b73.js";/* empty css                                                            *//* empty css                                                 */const O={class:"prolect-material"},P={class:"container"},T={class:"df-aic-jcsb"},V=s("h2",{class:"title"},"Проект",-1),I=s("h4",{class:"prolect-material-name"},"Название",-1),J=s("h4",{class:"prolect-material-name"},"Аннотация",-1),U=s("h4",{class:"prolect-material-name"},"Область",-1),z={class:"prolect-material-checkbox-wrapper"},E={class:"prolect-material-checkbox"},L=s("h4",{class:"prolect-material-name"},"Дисциплины",-1),Y={class:"prolect-material-checkbox"},X={__name:"CreateProject",setup(q){const h=l(!1),C=l(!0),r=F(),u=l(""),p=l("");l("");const n=l([]),c=l([]),d=new Date,S=d.getFullYear(),b=String(d.getMonth()+1).padStart(2,"0"),$=String(d.getDate()).padStart(2,"0"),j=`${S}-${b}-${$}`,B=(a,t)=>{if(t)c.value.push(a);else{const e=c.value=c.value.filter(m=>m!==a);c.value=e}},w=(a,t)=>{if(t)n.value.push(a);else{const e=n.value=n.value.filter(m=>m!==a);n.value=e}},D=async()=>{const a={description:u.value,title:p.value,members:[r.state.userInfo.id],region:n.value,disciplines:["1"],science:c.value.length,year:j},e=await(await fetch("http://89.208.106.189/api/v1/project/create",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8",Authorization:`Bearer ${JSON.parse(localStorage.getItem("access_token"))}`},body:JSON.stringify(a)})).json();console.log(e)};return A(()=>{r.dispatch("getSciences")}),(a,t)=>(o(),_("section",O,[s("div",P,[s("div",T,[V,C.value?(o(),i(x,{key:0,onClick:t[0]||(t[0]=e=>a.$router.push("/projects")),style:{padding:"15px 70px"},text:"Назад",class:"btn-first"})):(o(),i(x,{key:1,onClick:t[1]||(t[1]=e=>h.value=!h.value),style:{padding:"15px 70px"},text:"Покинуть проект"}))]),I,v(s("input",{type:"text",class:"prolect-material-input",placeholder:"Введите","onUpdate:modelValue":t[2]||(t[2]=e=>p.value=e)},null,512),[[f,p.value]]),J,v(s("textarea",{class:"prolect-material-input",placeholder:"Введите","onUpdate:modelValue":t[3]||(t[3]=e=>u.value=e)},null,512),[[f,u.value]]),U,s("div",z,[s("div",E,[(o(!0),_(k,null,g(y(r).state.sciences,e=>(o(),i(N,{onChildClickSec:w,key:e.title_ru,item:e.title_ru},null,8,["item"]))),128))])]),L,s("div",Y,[(o(!0),_(k,null,g(y(r).state.sciences,e=>(o(),i(M,{onChildClick:B,key:e.title_ru,item:e.title_ru},null,8,["item"]))),128))]),s("button",{onClick:D,class:"prolect-material-btn"},"Создать материал")])]))}};export{X as default};
