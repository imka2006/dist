import{u as x,r as h,q as B,h as S,i as N,o as e,c as s,b as o,F as u,f as _,e as R,a as c,m as $,t as k,j as f,p as g}from"./index-1d5f5eb5.js";import{_ as C}from"./Checkbox-65a82ae2.js";import{B as b}from"./Btn-7549b577.js";import{_ as V,S as D}from"./Spinner-1274af20.js";/* empty css                                                 *//* empty css                                                            *//* empty css                                                 */const F={class:"projects"},L={class:"container"},P=o("div",{class:"df-aic-jcsb"},[o("h2",{class:"title"},"Проекты")],-1),U={class:"projects-content"},q={class:"projects-left"},E=o("div",{class:"projects-subtitle"},"Область",-1),I={class:"projects-left another"},J={key:0,class:"projects-right"},M={class:"projects-subtitle"},O=o("div",{class:"line"},null,-1),T={key:1,class:"wrapper"},Y={__name:"Projects",setup(z){const y=x(),j=h([]);h([]),B(),JSON.parse(localStorage.getItem("user_info"));const d=h(!1),w=async()=>{d.value=!0;const p=await fetch("http://89.208.106.189/api/v1/project/list?limit=100"),{results:r}=await p.json();for(let a=0;a<r.length;a++)for(let t=0;t<r[a].members.length;t++){const l=r[a].members[t],n=await(await fetch("http://89.208.106.189/api/v1/authors/list?id="+l)).json(),v=[];for(let i=0;i<n.results.length;i++)v.push({name:n.results[i].last_name+" "+n.results[i].first_name,id:n.results[i].id});r[a].members[t]=v}d.value=!1,j.value=r};return S(()=>{w()}),(p,r)=>{const a=N("router-link");return e(),s("section",F,[o("div",L,[P,o("div",U,[o("div",q,[E,(e(!0),s(u,null,_(R(y).state.listRu,t=>(e(),$(C,{key:t.id,item:t},null,8,["item"]))),128)),c(b,{class:"projects-btn",text:"Применить фильтр"}),c(b,{onClick:r[0]||(r[0]=t=>p.$router.push("/create-project")),class:"projects-btn another",text:"Создать проект "})]),o("div",I,[c(V,{class:"projects-dropdown"})]),d.value?(e(),s("div",T,[c(D,{class:"projects-spinner"})])):(e(),s("div",J,[(e(!0),s(u,null,_(j.value,t=>(e(),s("div",{key:t.id,class:"projects-block"},[o("div",M,k(t.title),1),O,(e(!0),s(u,null,_(t.members,l=>(e(),s("div",{class:"projects-item",key:l},[(e(!0),s(u,null,_(l,(m,n)=>(e(),s("p",{key:n},[f(" Авторы: "),c(a,{to:"/another-cabinet/"+m.id},{default:g(()=>[f(k(m.name),1)]),_:2},1032,["to"])]))),128))]))),128)),c(a,{to:"/project/"+t.id,class:"materials-item",style:{"text-decoration":"underline"}},{default:g(()=>[f("Подробнее")]),_:2},1032,["to"])]))),128))]))])])])}}};export{Y as default};
